# Firezone Apple Client - mise configuration
# Usage: mise run <task> (from this directory) or mise //swift/apple:<task> (from repo root)
#
# Tasks are auto-discovered from mise-tasks/ directory.
# Task names match filenames (e.g., mise-tasks/build.sh -> //swift/apple:build.sh)
#
# Requires: MISE_EXPERIMENTAL=1 for monorepo task discovery

[task_config]
includes = ["mise-tasks"]

[env]
PLATFORM = "macOS"
CONFIGURATION = "Debug"
# Set consistent environment to prevent Rust rebuilds (must match Xcode project setting)
MACOSX_DEPLOYMENT_TARGET = "13.0"

# =============================================================================
# Composite Tasks (can't be auto-discovered)
# =============================================================================

[tasks.all]
description = "Build and install (build + install)"
depends = ["build", "install"]
