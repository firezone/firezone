import Alert from "@/components/DocsAlert";
import PlanBadge from "@/components/PlanBadge";
import SupportOptions from "@/components/SupportOptions";
import Image from "next/image";
import Link from "next/link";

<PlanBadge plans={["starter", "team", "enterprise"]}>

# SSO with Okta

</PlanBadge>

In this guide, you’ll set up Okta as an identity provider for Firezone using
OpenID Connect (OIDC). Once configured, users will be able to authenticate to
Firezone using their Okta accounts.

## Overview

The Firezone Okta connector integrates with Okta’s OIDC APIs to provide secure
user authentication and single sign-on (SSO).

This guide covers **authentication only**. Features such as directory sync are
configured separately and are not required to complete this setup.

## Setup

Setting up Okta authentication in Firezone is similar to configuring a standard
OIDC provider. Follow the steps below to create an OIDC application in Okta and
connect it to Firezone.

### Step 1: Start the Okta provider setup in Firezone

In your Firezone admin portal, go to **Settings → Authentication**

Next click **Add Provider** and select **Okta** from the list of available
providers.

You should now see a setup form containing values you’ll need when configuring
the Okta application. Keep this page open while completing the next steps.

### Step 2: Create a new OIDC app in Okta

In a separate browser tab open your Okta admin portal, go to **Applications →
Applications** and click **Create App Integration**.

<Link
  href="/images/kb/authenticate/okta/okta-auth-applications.png"
  target="_blank"
>
  <Image
    src="/images/kb/authenticate/okta/okta-auth-applications.png"
    alt="Create Okta app integration"
    width={1200}
    height={1200}
  />
</Link>

You should be shown a modal for a new app integration.

Select **OIDC – OpenID Connect**, then choose **Web Application** and click
**Next**.

<Link
  href="/images/kb/authenticate/okta/okta-auth-new-app-integration-start.png"
  target="_blank"
>
  <Image
    src="/images/kb/authenticate/okta/okta-auth-new-app-integration-start.png"
    alt="New Okta app integration start"
    width={1200}
    height={1200}
  />
</Link>

Configure the application as follows:

- **App integration name**: `Firezone`
- **Grant types**:
  - Authorization Code
- **Sign-in redirect URIs**: redirect URI shown in the Firezone setup form.
- **Sign-out redirect URIs**: `https://app.firezone.dev`

<Link
  href="/images/kb/authenticate/okta/okta-auth-new-app-integration-form.png"
  target="_blank"
>
  <Image
    src="/images/kb/authenticate/okta/okta-auth-new-app-integration-form.png"
    alt="New Okta app integration form"
    width={1200}
    height={1200}
  />
</Link>

Scroll down the page to the **Assignments** section. Here you can assign the
application to the users or groups who should be able to sign in to Firezone.

<Alert color="warning">
  At a minimum the user completing this setup must be assigned to the Okta application.
  <br />Ensure this assignment is done before proceeding.

</Alert>

<Link
  href="/images/kb/authenticate/okta/okta-auth-new-app-integration-assignments.png"
  target="_blank"
>
  <Image
    src="/images/kb/authenticate/okta/okta-auth-new-app-integration-assignments.png"
    alt="New Okta app assignments"
    width={1200}
    height={1200}
  />
</Link>

Click **Save** to create the application.

### Step 3: Configure the Okta provider in Firezone

In the upper righthand corner of your Okta dashboard, click on your username and
copy the Okta domain and paste it in to the form input titled `Okta Domain`.

<Link
  href="/images/kb/authenticate/okta/okta-auth-okta-domain.png"
  target="_blank"
>
  <Image
    src="/images/kb/authenticate/okta/okta-auth-okta-domain.png"
    alt="Okta domain"
    width={1200}
    height={1200}
  />
</Link>

In the Okta application settings, copy the following values:

- **Client ID**
- **Client Secret**

<Link
  href="/images/kb/authenticate/okta/okta-auth-new-app-integration-client-creds.png"
  target="_blank"
>
  <Image
    src="/images/kb/authenticate/okta/okta-auth-new-app-integration-client-creds.png"
    alt="Okta app client credentials"
    width={1200}
    height={1200}
  />
</Link>

Paste these values into the corresponding fields in the Firezone setup form.

Optionally, you may enable **Require PKCE as additional verification** in Okta
for enhanced security.

### Step 4: Verify and complete the Okta provider setup in Firezone

Once all required fields are filled out, click **Verify Now**.

A new tab should open and attempt to login to your new Okta app. If successful
you should end up on a page with a large green checkmark. The page should
instruct you to close the tab. Back in the Firezone portal you should now see
the new Okta app has been verified and you can now click the **Create** button
at the bottom of the form.

<Alert color="info">
  Please note that while the Okta app has been setup, users will still need to
  be created in the Firezone portal before any user is allowed to login with
  Okta. If you are an enterprise user, you may now start setting up [Okta
  Directory Sync](#).
</Alert>

<SupportOptions />
