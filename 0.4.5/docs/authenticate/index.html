<!DOCTYPE html> <html lang="en-US"> <body> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/0.4.5/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/0.4.5/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/0.4.5/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/0.4.5/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Authenticate | Docs Firezone</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Authenticate" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This page documents all the authentication methods that Firezone supports." /> <meta property="og:description" content="This page documents all the authentication methods that Firezone supports." /> <link rel="canonical" href="https://docs.firezone.dev/0.4.5/docs/authenticate/" /> <meta property="og:url" content="https://docs.firezone.dev/0.4.5/docs/authenticate/" /> <meta property="og:site_name" content="Docs Firezone" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Authenticate" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"This page documents all the authentication methods that Firezone supports.","headline":"Authenticate","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.firezone.dev/0.4.5/assets/images/logo-main.svg"}},"url":"https://docs.firezone.dev/0.4.5/docs/authenticate/"}</script> <!-- End Jekyll SEO tag --> <script defer src="/assets/js/version-selector.js"></script> <!-- PostHog Telemetry --> <script> !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]); posthog.init('phc_ubuPhiqqjMdedpmbWpG2Ak3axqv5eMVhFDNBaXl9UZK',{api_host:'https://telemetry.firez.one'}) </script> <!-- Fonts --> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300;400;500;600;700;900&display=swap" rel="stylesheet"> <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet"> <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;900&display=swap" rel="stylesheet"> </head> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://docs.firezone.dev/0.4.5/" class="site-title lh-tight"> <div class="site-logo-wrapper"> <div class="site-logo"></div> <h1>Documentation</h1> </div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="select-version"> <label> Select version: <select class="version-selector"> </select> </label> </div> <ul class="nav-list"><li class="nav-list-item"><a href="https://docs.firezone.dev/0.4.5/" class="nav-list-link">Overview</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.firezone.dev/0.4.5/docs/deploy/" class="nav-list-link">Deploy</a><ul class="nav-list "><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/deploy/supported-platforms/" class="nav-list-link">Supported Platforms</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/deploy/prerequisites/" class="nav-list-link">Prerequisites</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/deploy/server/" class="nav-list-link">Install Server</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.firezone.dev/0.4.5/docs/authenticate/" class="nav-list-link active">Authenticate</a><ul class="nav-list "><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/authenticate/google/" class="nav-list-link">Google</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/authenticate/okta/" class="nav-list-link">Okta</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/authenticate/azure-ad/" class="nav-list-link">Azure Active Directory</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/authenticate/web-auth/" class="nav-list-link">Local Email / Password Authentication</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.firezone.dev/0.4.5/docs/administer/" class="nav-list-link">Administer</a><ul class="nav-list "><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/administer/configure/" class="nav-list-link">Configure</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/administer/manage/" class="nav-list-link">Manage Installation</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/administer/upgrade/" class="nav-list-link">Upgrade</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/administer/uninstall/" class="nav-list-link">Uninstall</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/administer/troubleshoot/" class="nav-list-link">Troubleshoot</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/administer/security-considerations/" class="nav-list-link">Security Considerations</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/administer/running-sql-queries/" class="nav-list-link">Running SQL Queries</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.firezone.dev/0.4.5/docs/user-guides/" class="nav-list-link">User Guides</a><ul class="nav-list "><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/user-guides/add-users/" class="nav-list-link">Add Users</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/user-guides/add-devices/" class="nav-list-link">Add Devices</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/user-guides/firewall-rules/" class="nav-list-link">Firewall Rules</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/user-guides/client-instructions/" class="nav-list-link">Client Instructions</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/user-guides/split-tunnel/" class="nav-list-link">Split Tunnel</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/user-guides/whitelist-vpn/" class="nav-list-link">Using Firezone as a NAT Gateway</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/user-guides/reverse-tunnel/" class="nav-list-link">Reverse Tunnel</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.firezone.dev/0.4.5/docs/reference/" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/reference/configuration-file/" class="nav-list-link">Configuration File</a></li><li class="nav-list-item "><a href="https://docs.firezone.dev/0.4.5/docs/reference/file-and-directory-locations/" class="nav-list-link">File and Directory Locations</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.firezone.dev/0.4.5/docs/reference/firewall-templates/" class="nav-list-link">Firewall Templates</a><ul class="nav-list"></ul></li></ul></li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Docs | Firezone" aria-label="Search Docs | Firezone" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"> <use xlink:href="#svg-search"></use> </svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://discourse.firez.one" class="site-button" > Ask a Question </a> </li> <li class="aux-nav-list-item"> <a href="https://e04kusl9oz5.typeform.com/to/ZPYb31sA#int=docs&source=nav" class="site-button" > Join the Business Beta </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1>Authenticate</h1> <hr /> <p>Firezone can be configured to require authentication before users can generate or download device configuration files. Optionally, <a href="#enforce-periodic-re-authentication">periodic re-authentication</a> can also be required for users to maintain their VPN session.</p> <p><img src="https://user-images.githubusercontent.com/52545545/168922621-1f0f4dea-adfc-4e15-a140-a2f213676103.gif" alt="Azure SSO" width="600" /></p> <p>By default, Firezone uses local email/password authentication, but can also support integration with any generic OpenID Connect (OIDC) identity provider. This allows users to sign in to Firezone using their credentials from Okta, Google, Azure AD, or your own custom identity provider.</p> <h2 id="integrating-a-generic-oidc-provider"> <a href="#integrating-a-generic-oidc-provider" class="anchor-heading" aria-labelledby="integrating-a-generic-oidc-provider"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> Integrating A Generic OIDC Provider </h2> <p>The example below details the config settings required by Firezone to enable SSO through an OIDC provider. The configuration file can be found at <code class="language-plaintext highlighter-rouge">/etc/firezone/firezone.rb</code>. To pick up changes, run <code class="language-plaintext highlighter-rouge">firezone-ctl reconfigure</code> and <code class="language-plaintext highlighter-rouge">firezone-ctl restart</code> to update the application.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This is an example using Google and Okta as an SSO identity provider.</span>
<span class="c1"># Multiple OIDC configs can be added to the same Firezone instance.</span>

<span class="c1"># Firezone can disable a user's VPN if there's any error detected trying</span>
<span class="c1"># to refresh their access_token. This is verified to work for Google, Okta, and</span>
<span class="c1"># Azure SSO and is used to automatically disconnect a user's VPN if they're removed</span>
<span class="c1"># from the OIDC provider. Leave this disabled if your OIDC provider</span>
<span class="c1"># has issues refreshing access tokens as it could unexpectedly interrupt a</span>
<span class="c1"># user's VPN session.</span>
<span class="n">default</span><span class="p">[</span><span class="s1">'firezone'</span><span class="p">][</span><span class="s1">'authentication'</span><span class="p">][</span><span class="s1">'disable_vpn_on_oidc_error'</span><span class="p">]</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">default</span><span class="p">[</span><span class="s1">'firezone'</span><span class="p">][</span><span class="s1">'authentication'</span><span class="p">][</span><span class="s1">'oidc'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">google: </span><span class="p">{</span>
    <span class="ss">discovery_document_uri: </span><span class="s2">"https://accounts.google.com/.well-known/openid-configuration"</span><span class="p">,</span>
    <span class="ss">client_id: </span><span class="s2">"&lt;GOOGLE_CLIENT_ID&gt;"</span><span class="p">,</span>
    <span class="ss">client_secret: </span><span class="s2">"&lt;GOOGLE_CLIENT_SECRET&gt;"</span><span class="p">,</span>
    <span class="ss">redirect_uri: </span><span class="s2">"https://firezone.example.com/auth/oidc/google/callback/"</span><span class="p">,</span>
    <span class="ss">response_type: </span><span class="s2">"code"</span><span class="p">,</span>
    <span class="ss">scope: </span><span class="s2">"openid email profile"</span><span class="p">,</span>
    <span class="ss">label: </span><span class="s2">"Google"</span>
  <span class="p">},</span>
  <span class="ss">okta: </span><span class="p">{</span>
    <span class="ss">discovery_document_uri: </span><span class="s2">"https://&lt;OKTA_DOMAIN&gt;/.well-known/openid-configuration"</span><span class="p">,</span>
    <span class="ss">client_id: </span><span class="s2">"&lt;OKTA_CLIENT_ID&gt;"</span><span class="p">,</span>
    <span class="ss">client_secret: </span><span class="s2">"&lt;OKTA_CLIENT_SECRET&gt;"</span><span class="p">,</span>
    <span class="ss">redirect_uri: </span><span class="s2">"https://firezone.example.com/auth/oidc/okta/callback/"</span><span class="p">,</span>
    <span class="ss">response_type: </span><span class="s2">"code"</span><span class="p">,</span>
    <span class="ss">scope: </span><span class="s2">"openid email profile offline_access"</span><span class="p">,</span>
    <span class="ss">label: </span><span class="s2">"Okta"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <ol> <li><code class="language-plaintext highlighter-rouge">discovery_document_uri</code>: This URL returns a JSON with information to construct a request to the OpenID server.</li> <li><code class="language-plaintext highlighter-rouge">client_id</code>: The client ID of the application.</li> <li><code class="language-plaintext highlighter-rouge">client_secret</code>: The client secret of the application.</li> <li><code class="language-plaintext highlighter-rouge">redirect_uri</code>: Instructs OIDC provider where to redirect after authentication. This should be your Firezone <code class="language-plaintext highlighter-rouge">EXTERNAL_URL + /auth/oidc/&lt;provider_key&gt;/callback/</code> (e.g. <code class="language-plaintext highlighter-rouge">https://firezone.example.com/auth/oidc/google/callback/</code>).</li> <li><code class="language-plaintext highlighter-rouge">response_type</code>: Set to <code class="language-plaintext highlighter-rouge">code</code>.</li> <li><code class="language-plaintext highlighter-rouge">scope</code>: <a href="https://openid.net/specs/openid-connect-basic-1_0.html#Scopes">OIDC scopes</a> to obtain from your OIDC provider. This should be set to <code class="language-plaintext highlighter-rouge">openid email profile</code> or <code class="language-plaintext highlighter-rouge">openid email profile offline_access</code> depending on the provider.</li> <li><code class="language-plaintext highlighter-rouge">label</code>: The button label text that shows up on your Firezone login screen.</li> </ol> <p>We’ve included instructions on how to set up Firezone with several popular identity providers:</p> <ul> <li><a href="/docs/authenticate/azure-ad/">Azure AD</a></li> <li><a href="/docs/authenticate/google/">Google</a></li> <li><a href="/docs/authenticate/okta/">Okta</a></li> <li><a href="/docs/authenticate/web-auth/">Local email/password authentication (default)</a></li> </ul> <p>If your identity provider is not listed above, but has a generic OIDC connector, please consult their documentation to find instructions on obtaining the config settings required.</p> <p>Join our <a href="https://www.firezone.dev/slack">Slack</a> to request additional help or open a <a href="https://github.com/firezone/firezone/issues">Github Issue</a> to request additional documentation for your provider.</p> <h2 id="enforce-periodic-re-authentication"> <a href="#enforce-periodic-re-authentication" class="anchor-heading" aria-labelledby="enforce-periodic-re-authentication"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> Enforce Periodic Re-authentication </h2> <p>Periodic re-authentication can be enforced by changing the setting in <code class="language-plaintext highlighter-rouge">settings/security</code>. This can be used to ensure a user must sign in to Firezone periodically in order to maintain their VPN session.</p> <p><img src="https://user-images.githubusercontent.com/52545545/160450817-26406854-285c-4977-aa69-033eee2cfa57.png" alt="periodic-auth" width="600" /></p> <p>You can set the session length to a minimum of 1 hour and maximum of 90 days. Setting this to Never disables this setting, allowing VPN sessions indefinitely. This is the default.</p> <p>To re-authenticate an expired VPN session, a user will need to turn off their VPN session and sign in to the Firezone portal (URL specified during <a href="/docs/deploy/prerequisites/">deployment</a> ).</p> <p>See detailed Client Instructions on how to re-authenticate your session <a href="/docs/user-guides/client-instructions/">here</a>.</p> <hr> <footer> <div class="mb-0"> <p> WireGuard® is a registered trademark of Jason A. Donenfeld. </p> <p> For support, first visit our <a href="https://discourse.firez.one/">Discussion Forums</a> </p> <a href="https://www.firezone.dev/">Company</a> | <a href="https://github.com/firezone/">Github</a> | <a href="https://twitter.com/firezonehq/">Twitter</a> </div> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/firezone/firezone/tree/master/docs/docs/authenticate/index.md" id="edit-this-page">Edit on GitHub</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
